# SQLiteAPI (удобная обёртка над `sqlite3`)

**SQLiteAPI** — это маленькая, но удобная обёртка для работы с SQLite-базами из Python.  
Весь функционал умещается в **двух файлах** (`db.py`, `log.py`) и обеспечивает:

* лаконичные CRUD-методы (`select`, `insert_one`, `insert_many`, `update`, `delete`, `clear_table`, `create_table`);
* универсальный метод `exec_sql` для любых произвольных запросов;
* автоматическое логирование всех операций и ошибок в каталог `/logs`;
* безопасное закрытие соединения при уничтожении объекта.

---

## Возможности

| ☑️  | Описание |
| --- | -------- |
| **Один импорт** | `from db import Db` — и можно работать с БД. |
| **Автосоздание файла БД** | Файл `<name>.db` создаётся при первом обращении. |
| **Простые CRUD-методы** | Высокоуровневые хелперы для типовых операций. |
| **Сырые запросы** | `exec_sql()` позволяет выполнять любой SQL. |
| **Логирование** | Все действия и исключения пишутся в ротационный лог. |
| **Безопасное закрытие** | Коммит и `close()` вызываются в деструкторе. |

---

## Установка

Проект не имеет внешних зависимостей (только стандартная библиотека). Просто склонируйте репозиторий или скопируйте два файла:

```bash
git clone https://github.com/loffy1337/sqlite_api.git
cd simple_sqlite
python -m venv .venv
source .venv/bin/activate
```

---

## API-справка

| Метод   | Короктий пример |
| ---------- | ----------------- | --------------|
| exec_sql("SQL CODE") | Выполняет произвольный запрос, возвращает fetchall() если он SELECT |
| select('tbl', columns=['a','b'], where='a>5')        | Генерирует SELECT с опциональными колонками и WHERE                |
| insert_one('tbl', {'a':1,'b':'x'})      | Один INSERT              |
| insert_many('tbl', [ {...}, {...} ]) | Пакетная вставка, вызывает insert_one для каждого словаря              |
| update('tbl', {'a':10}, where='b="x"')      | UPDATE tbl SET a = 10 WHERE …              |
| delete('tbl', 'a>100')     | DELETE FROM tbl WHERE …                |
| clear_table('tbl')     | DELETE FROM tbl                |
| create_table('tbl', columns=('c1 TEXT','c2 INT'), referense='…')     | Создаёт таблицу, если не существует               |